<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="才权的博客">
<meta property="og:url" content="http://yoursite.com/page/6/index.html">
<meta property="og:site_name" content="才权的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="才权的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/6/"/>





  <title> 才权的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4e94c4c1ded5d320541370545af638ea";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">才权的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-数据处理模块实现-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-数据处理模块实现-11/" itemprop="url">
                  Eddy的AI小助手-数据处理模块实现(11)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T14:54:23+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Python数据处理模块结构总览"><a href="#Python数据处理模块结构总览" class="headerlink" title="Python数据处理模块结构总览"></a>Python数据处理模块结构总览</h1><p>Python版本：2.7.13</p>
<p>Http Server：Tornado</p>
<p>Http请求库：Requests</p>
<p>IDE：PyDev+Eclipse</p>
<p>工程目录,</p>
<p><img src="/2017/07/07/Eddy的AI小助手-数据处理模块实现-11/工程目录.png" alt="工程目录"></p>
<ul>
<li>turing：图灵机器人的请求封装模块（www.tuling123.com/）；</li>
<li>utils：通用工具模块，当前只包含基于requests的http请求封装；</li>
<li>common_params：通用的常量定义模块；</li>
<li>http_request：http请求测试模块</li>
<li>test：本地功能测试模块</li>
<li>tornado_server：基于Tornado的web服务模块（部署在服务器中）</li>
</ul>
<h1 id="工程使用"><a href="#工程使用" class="headerlink" title="工程使用"></a>工程使用</h1><h2 id="本地功能测试"><a href="#本地功能测试" class="headerlink" title="本地功能测试"></a>本地功能测试</h2><p>使用test进行本地功能的测试，比如测试本地的图灵请求功能，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-数据处理模块实现-11/图灵机器人接口模块测试代码.png" alt="图灵机器人接口模块测试代码"></p>
<p><img src="/2017/07/07/Eddy的AI小助手-数据处理模块实现-11/测试结果.png" alt="测试结果"></p>
<h2 id="Tornado-web服务部署"><a href="#Tornado-web服务部署" class="headerlink" title="Tornado web服务部署"></a>Tornado web服务部署</h2><p>在服务器端启动tornado_server模块即可，</p>
<pre><code>#python tornado_server.py
</code></pre><h2 id="Http请求测试"><a href="#Http请求测试" class="headerlink" title="Http请求测试"></a>Http请求测试</h2><p>在部署好tornado_server web服务后，使用http_request模块完成http请求测试。比如客户端请求服务端的图灵能力（服务端调用图灵接口），</p>
<p><img src="/2017/07/07/Eddy的AI小助手-数据处理模块实现-11/请求测试代码.png" alt="http请求测试代码"></p>
<p><img src="/2017/07/07/Eddy的AI小助手-数据处理模块实现-11/测试结果2.png" alt="测试结果"></p>
<p>其中，服务端与客户端之间基于Json进行通信。</p>
<h1 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a></p>
<p>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-后台处理模块接入-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-后台处理模块接入-10/" itemprop="url">
                  Eddy的AI小助手-后台处理模块接入(10)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T14:47:02+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Python后台处理模块接入的缘由"><a href="#Python后台处理模块接入的缘由" class="headerlink" title="Python后台处理模块接入的缘由"></a>Python后台处理模块接入的缘由</h1><p><img src="/2017/07/07/Eddy的AI小助手-后台处理模块接入-10/Python.png" alt="Python"></p>
<p>前面的后台搭建都是基于Java EE的，但后面随着对机器学习的深入，慢慢发现大多数机器学习的算法实现都是基于Python和R语言的。R语言主要集中在对数据的预处理、分析和展示，而Python不但囊括了R语言的功能，还延伸到了网络请求、Web服务、数据抓取等方方面面。Python不但在语法上入门简单、在开发环境的搭建上相对容易，开发IDE也很完善易用。在机器学习领域有很多现成的算法库，开源工具包非常完备。Python一旦入门，绝对会对它爱不释手的 :)</p>
<h1 id="Python学习的个人经验"><a href="#Python学习的个人经验" class="headerlink" title="Python学习的个人经验"></a>Python学习的个人经验</h1><p>既然是个人经验，就要先交代下自己在学习python之前的编程经历。从大学一年级接触C语言，并在大学二年级在电子设计竞赛中投入真正的开发使用，直到进入互联网公司之前，都是在使用C语言做底层驱动和中间件开发，使用C++做业务逻辑开发。进入互联网之后开始接触Java，并进行Android中间件和应用开发。在业余时间自学了Java EE的开发流程并了解了Web前端开发的基础知识。</p>
<p>我的Python学习比较简略：</p>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><p>在网上看一篇关于Python的入门帖子，比如www.runoob.com/python/python-basic-syntax.html，在这个过程中了解语言特性和基本语法、搭建基本的运行环境，这个过程1~2个小时足矣。</p>
<h2 id="全局把握"><a href="#全局把握" class="headerlink" title="全局把握"></a>全局把握</h2><p>对Python有了基本的了解和认识后找一本大而全的教科书，比如《Python基础教程》（我找了本电子版），这是一本很厚的书。然后查看目录，并逐页“扫读”（所谓“扫读”就是非常快速的粗略阅读和跳读，在阅读的过程中并不需要逐行逐句，而是要粗枝大叶）。对于“魔法方法、属性和迭代器”这样的章节可以仔细研读，对于“条件、循环和其他语句”这样的章节可以一扫而过、对于“图形用户界面”这样的章节则可以直接跳过不看。整个过程的一个核心思想是：</p>
<ol>
<li><p>对比阅读，发掘Python相对于自己以往掌握的语言有哪些相同点和不同点；</p>
</li>
<li><p>系统把握，明了整个Python语言的系统体系和知识组成；</p>
</li>
<li><p>确定目标，扫读的目标是在后续如果遇到相应的Python问题，能够快速的定位到具体的知识点，并查询答案（这本大厚书可以在以后作为字典类的工具书使用）</p>
</li>
</ol>
<p>第二个步骤需要半天到一天的时间。</p>
<h2 id="工程实践"><a href="#工程实践" class="headerlink" title="工程实践"></a>工程实践</h2><p>在Python终端敲简单的命令显然无法满足我们的工程需要，一个完整的工程开发需要便捷的开发工具和清晰的模块关系。这里我使用DevPy+Eclipse搭建IED开发环境，工程中引入包、模块、类等Python特性来明晰项目中的模块关系。在开发中遇到问题则通过查询《Python基础教程》或在网上搜寻解决方法。</p>
<h1 id="Python后台处理模块的功能和接入方式"><a href="#Python后台处理模块的功能和接入方式" class="headerlink" title="Python后台处理模块的功能和接入方式"></a>Python后台处理模块的功能和接入方式</h1><p>Python的后台处理模块主要用来做机器学习相关的处理工作。Python模块引入了Tornado Web引擎，对外以REST API的形式提供服务。所以简单的说Python的后台处理模块也是像基于Java EE一样的Http Web服务。</p>
<h1 id="后记（自己的语言学习感悟）"><a href="#后记（自己的语言学习感悟）" class="headerlink" title="后记（自己的语言学习感悟）"></a>后记（自己的语言学习感悟）</h1><h2 id="汇编语言"><a href="#汇编语言" class="headerlink" title="汇编语言"></a>汇编语言</h2><p>对于汇编语言相信绝大多数同学除了在《微机原理》的实验课上使用过之外，应该在真实工作中很少有接触，即便对于很多嵌入式开发的同学在工作中也很难接触的到。我在工作中唯一的实践经历是修改中断向量表。是在一个没有MMU的MCU上保证运行的ucOS系统能够有独立的Bios、Bootloader、App三个独立的运行空间。当时的解决方案是使用两级中断向量表：硬件触发中断后会自动跳转到第一级的中断向量表，而第一级的中断向量表直接指向第二级中断向量表。第二级中断向量表会通过检查硬件管脚的状态转跳到Bios、Bootloader、App不同空间的处理代码段。汇编语言的学习重点不是语言本身，而是机器运行的机制。</p>
<h2 id="C语言"><a href="#C语言" class="headerlink" title="C语言"></a>C语言</h2><p>相比于汇编C语言确实算是高级语言了。对于互联网的同学来说C语言的语法很简单，C语言的指针又很眩晕，在功能开发上，很简单的事情要写上一大堆代码。其实业务开发并不是C语言的优势所在，C语言更多是为了取代汇编，同样C语言的学习重点也不在于语言本身，更在于对系统运行机制的理解，所以，C语言更多的应用场景是驱动开发和协议解析。</p>
<h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><p>相比于C语言，C++对业务逻辑的处理能力大大增强，同时，设计模式在C++中的应用也变得得心应手。但C++只能算的上C语言的升级版，作为程序员，并不能完全脱离系统原理的限制，将全部的注意力放在业务逻辑的实现上。但劣势同样也是优势，正是C++同系统的相关性才使得C++在嵌入式设备和实时性较高的核心中间件领域留有一席之地。</p>
<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><p>相对于C++，Java实现了完全的面向对象。从解放劳动力的角度讲，Java实现了一次飞跃。开发人员再也不用被底层的系统机制所牵绊，将自己的更多精力放在业务逻辑本身，同时，Java的各种工具支持包也很完备。这也很好的解释了，为什么嵌入式领域一个项目的开发周期往往是2~3年，开发成员往往是几十甚至是几百人。而互联网产品很多都是几个人或一个人，一周或一个月的作品。但不可否认，Java自身的运行机制，导致它对系统资源的高要求和运行时的低效率，这也是Java在特有领域不能完全替代C++的原因。</p>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>在接触Python之前，我一直认为Java是用起来最爽的语言（简单的运行和开发环境搭建、功能强大的IDE工具、完备的工具包支持），但接触到Python之后才发现我的结论下的太早了。相比于Java，Python除了是脚本语言、动态语言这样的基本属性之外，Python的一个很大的特点是简洁。Python能够使用更少的代码，更少的依赖完成你想要的工作。</p>
<p>当然语言和算法一样，没有一个算法能使用所有的场景，也没有一种语言能驾驭所有的领域。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-自定义语义解析和内容抓取-9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-自定义语义解析和内容抓取-9/" itemprop="url">
                  Eddy的AI小助手-自定义语义解析和内容抓取(9)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T14:31:39+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="需求提出"><a href="#需求提出" class="headerlink" title="需求提出"></a>需求提出</h1><p>上一篇文章中我们接入了图灵机器人，通过图灵机器人接口，我们可以实现查天气、看股票、听故事这样的需求。但如果我现在需要查看下我的简书上有哪些文章该如何处理呢？显然通过图灵机器人接口是不能实现的，这里就需要我们自己来完成语义的解析，同时，通过网络爬虫来爬取我在简书上的文章列表。下面我们以“我们简书上有哪些文章？”为例，来说明AI小助手中，自定义语义解析和内容抓取是如何实现的。</p>
<h1 id="语义解析"><a href="#语义解析" class="headerlink" title="语义解析"></a>语义解析</h1><p>在AI小助手中对语义的解析分为两个层次：</p>
<h2 id="1-理解意图"><a href="#1-理解意图" class="headerlink" title="1 理解意图"></a>1 理解意图</h2><p>意图就是要干什么，也是后台处理的能力范围。对于图灵机器人，它的能力包括“笑话大全”、“故事大全”、“成语接龙”等等：</p>
<p><img src="/2017/07/07/Eddy的AI小助手-自定义语义解析和内容抓取-9/图灵机器的能力.png" alt="图灵机器的能力"></p>
<p>在接收到用户请求后，图灵机器人会首先分析该请求和自己的那一种能力相对应，如果超过自己的能力范围，图灵机器人便无法进行处理。如果询问图灵机器人“我的简书上有哪些文章？”，用户的意图不在图灵的能力范围之内，它是无法做出正确回复的。</p>
<h2 id="2-确定意图参数"><a href="#2-确定意图参数" class="headerlink" title="2 确定意图参数"></a>2 确定意图参数</h2><p>在获取意图之后，就需要确定该意图对应的具体参数。比如“今天天气怎么样？”，图灵机器人能够获取该请求的意图是“天气查询”，但它不知道查询什么地方的天气，所以，也是无法给出正确的答复的。所以正确的询问方式应该是“今天深圳天气怎么样？”图灵机器人在识别到“天气查询”的意图后，还会提取“今天”和“深圳”这样的关键参数，从而返回正确的回复。</p>
<h2 id="3-AI小助手的语义解析"><a href="#3-AI小助手的语义解析" class="headerlink" title="3 AI小助手的语义解析"></a>3 AI小助手的语义解析</h2><p>AI小助手采用关键字匹配的方式来分层获取意图和意图对应的参数。对于“我的简书上有哪些文章？”，AI小助手对先匹配关键字“简书”获取意图，然后通过关键字“文章”来获取“简书”意图下的关键参数。</p>
<p>关键字的匹配使用了Java的正则表达式。其中，“简书”意图的匹配规则，</p>
<pre><code>private final String REG_EX_JIANSHU = &quot;简书|jianshu&quot;;
</code></pre><p>“文章”参数的匹配规则，</p>
<pre><code>private final String REG_EX_ARTICLE = &quot;文章|article&quot;;
</code></pre><p>意图和对应参数的提取都是基于字符串查找的，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-自定义语义解析和内容抓取-9/关键字匹配代码.png" alt="关键字匹配代码"></p>
<h1 id="内容爬取"><a href="#内容爬取" class="headerlink" title="内容爬取"></a>内容爬取</h1><p>在正确获取到请求的意图和对应参数后，需要给出正确的答复。对于“我的简书上有哪些文章？”这样的请求，我们可以通过网络爬虫来爬取自己需要的信息。在AI小助手中，采用了HtmlParser（htmlparser.sourceforge.net/）对个人的简书文章进行分析，从而爬取需要的信息。</p>
<h1 id="自定义语义解析与图灵机器人配合使用"><a href="#自定义语义解析与图灵机器人配合使用" class="headerlink" title="自定义语义解析与图灵机器人配合使用"></a>自定义语义解析与图灵机器人配合使用</h1><p>自定义语义解析可以同图灵机器人接口配合使用。首先进行自定义的语义解析，如果解析失败再通过图灵机器人接口进行解析。这样既可以满足像“我的简书上有哪些文章？”这样自定义能力，又可以完成像“今天深圳天气怎么样？”这样的通用能力。</p>
<h1 id="AI小助手自定义语义解析和内容抓取效果"><a href="#AI小助手自定义语义解析和内容抓取效果" class="headerlink" title="AI小助手自定义语义解析和内容抓取效果"></a>AI小助手自定义语义解析和内容抓取效果</h1><p><img src="/2017/07/07/Eddy的AI小助手-自定义语义解析和内容抓取-9/自定义意图解析.png" alt="自定义意图解析"></p>
<h1 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a></p>
<p>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-图灵机器人接入-8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-图灵机器人接入-8/" itemprop="url">
                  Eddy的AI小助手-图灵机器人接入(8)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T14:19:24+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><p>通过前面的步骤，我们的后台服务器已经可以接收来自微信公众后的消息，并能够将处理的结果返回给微信公众号客户端。如果我们的后台服务器程序能够解析用户的请求意图，并将意图的处理结果返回给客户端，那么我们的AI小助手就具备了真正的“智慧”。</p>
<h1 id="图灵机器人接口"><a href="#图灵机器人接口" class="headerlink" title="图灵机器人接口"></a>图灵机器人接口</h1><p>对用户意图的理解，AI小助手使用了图灵机器人请求接口。图灵机器人的官方地址：<a href="www.tuling123.com/">www.tuling123.com/</a></p>
<p>图灵机器人有多种接入方式，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-图灵机器人接入-8/图灵机器人接入方式.png" alt="图灵机器人接入方式"></p>
<p>AI小助手采用API的形式接入图灵机器人。API的请求是基于Http的，支持Get和Post请求，请求和结果返回通过Json进行序列化。天气状况的请求和应答如下图所示：</p>
<p><img src="/2017/07/07/Eddy的AI小助手-图灵机器人接入-8/天气状况查询接口.png" alt="天气状况查询接口"></p>
<h1 id="AI小助手接入演示"><a href="#AI小助手接入演示" class="headerlink" title="AI小助手接入演示"></a>AI小助手接入演示</h1><p><img src="/2017/07/07/Eddy的AI小助手-图灵机器人接入-8/使用AI小助手查询天气.png" alt="使用AI小助手查询天气"></p>
<h1 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a><br>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-添加log4j日志工具-7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-添加log4j日志工具-7/" itemprop="url">
                  Eddy的AI小助手-添加log4j日志工具(7)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T14:10:50+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们在调试的过程中可以在本地搭建Tomcat服务器，并使之与Eclipse环境相关联。同时，将Eclipse中开发的程序直接部署到本地的Tomcat中运行，从控制台查看打印信息（使用System.out.println（）即可）。但在实际的线上环境，是无法实时的查看控制台的打印信息的，我们需要将运行中打印的Log存放到文件中，然后查看文件中的Log信息。对于线上环境的Log打印，AI小助手采用了log4j组件。</p>
<h1 id="log4j组件使用的主要步骤"><a href="#log4j组件使用的主要步骤" class="headerlink" title="log4j组件使用的主要步骤"></a>log4j组件使用的主要步骤</h1><h2 id="1-添加jar包"><a href="#1-添加jar包" class="headerlink" title="1 添加jar包"></a>1 添加jar包</h2><p>从log4j的官网上下载最新的jar包，并存放在工程的lib目录下，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-添加log4j日志工具-7/添加依赖jar包.png" alt="添加依赖jar包"></p>
<h2 id="2-添加log4j配置文件"><a href="#2-添加log4j配置文件" class="headerlink" title="2 添加log4j配置文件"></a>2 添加log4j配置文件</h2><p>在src同级创建并设置log4j.properties，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-添加log4j日志工具-7/添加log4j配置文件.png" alt="添加log4j配置文件"></p>
<h2 id="3-指定log文件的保存路径"><a href="#3-指定log文件的保存路径" class="headerlink" title="3 指定log文件的保存路径"></a>3 指定log文件的保存路径</h2><p><img src="/2017/07/07/Eddy的AI小助手-添加log4j日志工具-7/设置log保存目录.png" alt="设置log保存目录"></p>
<h2 id="4-在代码中添加log打印语句"><a href="#4-在代码中添加log打印语句" class="headerlink" title="4 在代码中添加log打印语句"></a>4 在代码中添加log打印语句</h2><h1 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a></p>
<p>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-微信消息收发-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-微信消息收发-6/" itemprop="url">
                  Eddy的AI小助手-微信消息收发(6)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T14:04:39+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="微信消息收发规范"><a href="#微信消息收发规范" class="headerlink" title="微信消息收发规范"></a>微信消息收发规范</h1><p>微信使用POST请求形式来收发消息，消息以XML形式进行封装，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-微信消息收发-6/微信数据收发.png" alt="微信数据收发"></p>
<h1 id="微信消息类型"><a href="#微信消息类型" class="headerlink" title="微信消息类型"></a>微信消息类型</h1><ul>
<li>消息类型包括：</li>
<li>文本消息</li>
<li>图片消息</li>
<li>语音消息</li>
<li>视频消息</li>
<li>小视频消息</li>
<li>地理位置消息</li>
<li>链接消息</li>
</ul>
<h1 id="微信消息的解析实现"><a href="#微信消息的解析实现" class="headerlink" title="微信消息的解析实现"></a>微信消息的解析实现</h1><p>微信消息的解析直接使用了黄路飞的代码（<a href="www.cnblogs.com/huanglufei/p/5592072.html">www.cnblogs.com/huanglufei/p/5592072.html</a>）</p>
<p>其中，XML的解析使用了XStream组件。</p>
<h1 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a></p>
<p>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-在welcom-file中设置优先响应的Servlet-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-在welcom-file中设置优先响应的Servlet-5/" itemprop="url">
                  Eddy的AI小助手-在welcom-file中设置优先响应的Servlet(5)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T13:59:32+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="WebApp对Http的默认响应设置"><a href="#WebApp对Http的默认响应设置" class="headerlink" title="WebApp对Http的默认响应设置"></a>WebApp对Http的默认响应设置</h1><p>在没有指定具体的响应html页面、jsp页面或Servlet时，Tomcat将Http请求转发给对于的WebApp后，最终由WebApp中的哪一个.html页面、.jsp页面或Servlet来响应，是由web.xml中<welcome-file-list>标签内容决定的（jsp页面等同于Servlet对象）。</welcome-file-list></p>
<h1 id="针对微信请求的web-xml修改"><a href="#针对微信请求的web-xml修改" class="headerlink" title="针对微信请求的web.xml修改"></a>针对微信请求的web.xml修改</h1><p>具体修改如下：</p>
<p><img src="/2017/07/07/Eddy的AI小助手-在welcom-file中设置优先响应的Servlet-5/welcome-file-list标签.png" alt="welcome-file-list标签"></p>
<p><img src="/2017/07/07/Eddy的AI小助手-在welcom-file中设置优先响应的Servlet-5/servlet、servlet-mapping标签.png" alt="servlet、servlet-mapping标签"></p>
<p>其中，MyWechatMain为Servlet类。</p>
<h1 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a></p>
<p>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的微信小助手-置Tomcat默认响应-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的微信小助手-置Tomcat默认响应-4/" itemprop="url">
                  Eddy的微信小助手-置Tomcat默认响应(4)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T13:49:11+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Tomcat默认响应"><a href="#Tomcat默认响应" class="headerlink" title="Tomcat默认响应"></a>Tomcat默认响应</h1><p>当在浏览器中输入Web服务的IP地址时（假设为124.35.32.1），如：</p>
<pre><code>http://124.35.32.1
</code></pre><p>Tomcat的默认响应页面为：</p>
<pre><code>$CATALINA_HOME/webapps/ROOT/index.jsp
</code></pre><p>Eclipse将Java EE工程以.war形式导出，并放置在“CATALINA_HOME/webapps”目录下。</p>
<p>Tomcat重启后，.war文件会自动解压。如“MyWeChatService.war”会在当前目录下被解压为MyWeChatService，我们可以通过绝对路径的形式访问该工程中的页面：</p>
<pre><code>http://124.35.32.1/MyWeChatService/index.jsp
</code></pre><h1 id="响应微信服务器请求"><a href="#响应微信服务器请求" class="headerlink" title="响应微信服务器请求"></a>响应微信服务器请求</h1><p>微信服务器对个人服务的请求为，</p>
<pre><code>http://124.35.32.1/
</code></pre><p>微信公众号中的设置，</p>
<p><img src="/2017/07/07/Eddy的微信小助手-置Tomcat默认响应-4/微信公众平台的服务器地址设置.png" alt="微信公众平台的服务器地址设置"></p>
<p>当前面临的一个问题是：来自微信服务器的“<a href="http://124.35.32.1/”请求到达个人服务后，Tomcat服务器如何将请求转发给MyWeChatService，而不是默认的ROOT？" target="_blank" rel="external">http://124.35.32.1/”请求到达个人服务后，Tomcat服务器如何将请求转发给MyWeChatService，而不是默认的ROOT？</a></p>
<h1 id="Tomcat默认响应设置"><a href="#Tomcat默认响应设置" class="headerlink" title="Tomcat默认响应设置"></a>Tomcat默认响应设置</h1><p>修改Tomcat/conf/server.xml文件：</p>
<p><img src="/2017/07/07/Eddy的微信小助手-置Tomcat默认响应-4/server.xml.png" alt="server.xml"></p>
<p><img src="/2017/07/07/Eddy的微信小助手-置Tomcat默认响应-4/server.xml修改.png" alt="server.xml修改"></p>
<p>server.xml修改后，重启Tomcat后，“<a href="http://124.35.32.1/”的请求便会直接转发给MyWeChatService了" target="_blank" rel="external">http://124.35.32.1/”的请求便会直接转发给MyWeChatService了</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="www.111cn.net/sys/Windows/51573.htm">www.111cn.net/sys/Windows/51573.htm</a></p>
<h1 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a><br>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-微信公众平台设置-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-微信公众平台设置-3/" itemprop="url">
                  Eddy的AI小助手-微信公众平台设置(3)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T13:38:18+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="申请微信公众号"><a href="#申请微信公众号" class="headerlink" title="申请微信公众号"></a>申请微信公众号</h1><p>在微信公众平台申请个人的微信公众号：<a href="mp.weixin.qq.com">mp.weixin.qq.com</a></p>
<h1 id="公众号设置"><a href="#公众号设置" class="headerlink" title="公众号设置"></a>公众号设置</h1><p>公众号设置只需关注“URL”即可，格式为:</p>
<pre><code>http://ip/
</code></pre><p>或</p>
<pre><code>https://ip/
</code></pre><p>“Token”和“EncodingAESKey”主要用于服务端对客户信息来源的检查，测试时，可以不用关心。</p>
<p>微信客户端发送到个人服务器的流程：微信客户端-&gt;微信后台服务器-&gt;个人后台服务器，Token和EncodingAESKey主要用来确保数据来源于微信的后台服务器。</p>
<p><img src="/2017/07/07/Eddy的AI小助手-微信公众平台设置-3/基本配置页面.png" alt="基本配置页面"></p>
<h1 id="服务器端口修改"><a href="#服务器端口修改" class="headerlink" title="服务器端口修改"></a>服务器端口修改</h1><p>微信的服务http请求端口为80（https请求为443），而Tomcat的http默认端口为8080，为了正确响应微信服务器的请求，需要修改Tomcat的http默认端口。修改Tomcat_Home/conf/server.xml，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-微信公众平台设置-3/server.xml修改.png" alt="server.xml修改"></p>
<h1 id="服务器响应设置"><a href="#服务器响应设置" class="headerlink" title="服务器响应设置"></a>服务器响应设置</h1><p>微信开放平台设置URL时，微信服务器会向个人的URL服务器发送get请求。服务器端需要正确响应微信服务器发来的验证请求，否则URL设置会失败，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-微信公众平台设置-3/微信公众平台-右侧边栏.png" alt="微信公众平台-右侧边栏"></p>
<p><img src="/2017/07/07/Eddy的AI小助手-微信公众平台设置-3/微信公众平台-URL验证.png" alt="微信公众平台-URL验证"></p>
<p>服务端代码，</p>
<p><img src="/2017/07/07/Eddy的AI小助手-微信公众平台设置-3/个人服务器端代码.png" alt="个人服务器端代码"></p>
<h1 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a></p>
<p>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/07/Eddy的AI小助手-系统组成-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Caiquan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="才权的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/07/Eddy的AI小助手-系统组成-2/" itemprop="url">
                  Eddy的AI小助手-系统组成(2)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-07T12:57:38+08:00">
                2017-07-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="（一）功能描述"><a href="#（一）功能描述" class="headerlink" title="（一）功能描述"></a>（一）功能描述</h1><p>Eddy的AI小助手是一个个人微信公众号，这个个人的公众号主要是作为AI系统信息输入的入口，通过公众号微信页面就可以把请求的文本和语音请求发送到自己配置的后台服务器。后台服务器接收到文本和语音请求后，处理生成回复内容，并将结果以文本、页面或语音的形式返回给微信客户端。</p>
<p><img src="/2017/07/07/Eddy的AI小助手-系统组成-2/Eddy的AI小助手公众号.png" alt="Eddy的AI小助手公众号"></p>
<h1 id="（二）-系统组成"><a href="#（二）-系统组成" class="headerlink" title="（二） 系统组成"></a>（二） 系统组成</h1><p>AI小助手由输入端、后台端两个基本部分组成。</p>
<h2 id="1-输入端"><a href="#1-输入端" class="headerlink" title="1. 输入端"></a>1. 输入端</h2><p>输入端直接采用微信公众号，这样不仅稳定、可靠，同时，很好的解决了Android和iOS的跨平台问题。</p>
<p>微信公众号与后台以XML形式进行通信，具体的规范参考微信公众平台技术文档：<a href="mp.weixin.qq.com">mp.weixin.qq.com</a></p>
<h2 id="2-后台端"><a href="#2-后台端" class="headerlink" title="2. 后台端"></a>2. 后台端</h2><p>后台端由Java后台服务和Python后台服务两个部分组成，Java后台服务主要响应微信客户端的请求，Python后台服务主要用于机器学习，并响应Java后台服务的请求：</p>
<p><img src="/2017/07/07/Eddy的AI小助手-系统组成-2/后台端组成.png" alt="后台端组成"></p>
<p><strong>后台配置：</strong></p>
<p>主机：阿里云ECS</p>
<p>系统：Ubuntu 14.04</p>
<p><strong>Java Web引擎：</strong></p>
<p>WebServer：Tomcat 9</p>
<p>框架选择：只使用最基本的Servlet</p>
<p><strong>Pyton Web引擎：</strong></p>
<p>WebServer：Tornado</p>
<p><strong>Java第三方组件：</strong></p>
<p>Log组件：Log4j</p>
<p>XML解析组件：XStream</p>
<p>网络爬虫（Html解析）：HtmlParser</p>
<p><strong>Pathon第三方组件：</strong></p>
<p>Http请求：Requests</p>
<p><strong>第三方服务：</strong></p>
<p>语音识别：百度语音（yuyin.baidu.com/）</p>
<p>语音合成：百度语音（yuyin.baidu.com/）</p>
<p>NLP处理：图灵机器人（www.tuling123.com/），后期可能会使用自己编写的处理模</p>
<h1 id="（三）开发环境"><a href="#（三）开发环境" class="headerlink" title="（三）开发环境"></a>（三）开发环境</h1><p>JavaIDE：Eclipse JavaEE</p>
<p><img src="/2017/07/07/Eddy的AI小助手-系统组成-2/Eclipse JaveEE.png" alt="Eclipse JaveEE"></p>
<p>Python IDE：PyDeb+Eclipse</p>
<p>文件传输：WinSCP</p>
<p>控制台：Putty</p>
<h1 id="（四）项目代码"><a href="#（四）项目代码" class="headerlink" title="（四）项目代码"></a>（四）项目代码</h1><p>Java代码：<a href="github.com/CaiquanLiu/MyWeChatService.git">github.com/CaiquanLiu/MyWeChatService.git</a></p>
<p>Python代码：<a href="github.com/CaiquanLiu/MyTuringService">github.com/CaiquanLiu/MyTuringService</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Liu Caiquan" />
          <p class="site-author-name" itemprop="name">Liu Caiquan</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">68</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Caiquan</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

# 此位置插入以下代码
<div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
</div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
